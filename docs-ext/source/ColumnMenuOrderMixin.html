<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='CpsiMapview-util-ColumnMenuOrderMixin'>/**
</span> * A mixin to order column selector menu alphabetically
 *
 * @class CpsiMapview.util.ColumnMenuOrderMixin
 */
Ext.define(&#39;CpsiMapview.util.ColumnMenuOrderMixin&#39;, {
    extend: &#39;Ext.Mixin&#39;,

<span id='CpsiMapview-util-ColumnMenuOrderMixin-property-mixinConfig'>    mixinConfig: {
</span>        after: {
            initItems: &#39;setup&#39;
        },
        before: {
            destroy: &#39;teardown&#39;
        }
    },

<span id='CpsiMapview-util-ColumnMenuOrderMixin-method-setup'>    setup: function () {
</span>        var me = this;
        me.on(&#39;headermenucreate&#39;, this.onHeaderMenuCreate);
    },

<span id='CpsiMapview-util-ColumnMenuOrderMixin-method-teardown'>    teardown: function () {
</span>        var me = this;
        me.un(&#39;headermenucreate&#39;, this.onHeaderMenuCreate);
    },

<span id='CpsiMapview-util-ColumnMenuOrderMixin-method-onHeaderMenuCreate'>    /**
</span>     * Sort the column names displayed when opening the submenu alphabetically
     * @param {any} grid
     * @param {any} menu
     */
    onHeaderMenuCreate: function (grid, menu) {
        // Fired immediately after the column header menu is created.
        var columnItems = menu.down(&#39;[itemId=columnItem]&#39;),
            menuItems = columnItems.menu.items.items;

        // Sorting by column&#39;s lowercase &quot;text&quot; in ascending order
        menuItems.sort(function (item1, item2) {
            var name1 = item1.text.toLowerCase(),
                name2 = item2.text.toLowerCase();
            if (name1 &lt; name2) //sort string ascending
                return -1;
            if (name1 &gt; name2)
                return 1;
            return 0; //default return value (no sorting)
        });

        // update keys order as well otherwise it will have old
        // menu item keys order and grouping by field starts creating a problem.
        columnItems.menu.items.keys = menuItems.map(function (item) {
            return item.id;
        });
    }
});
</pre>
</body>
</html>
