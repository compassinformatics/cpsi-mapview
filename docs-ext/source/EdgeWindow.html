<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">Ext.define(&#39;CpsiMapview.view.snappingExample.EdgeWindow&#39;, {
    extend: &#39;CpsiMapview.view.window.MinimizableWindow&#39;,
    xtype: [&#39;cmv_edgewindow&#39;],
    requires: [
        &#39;Ext.tab.Panel&#39;,
        &#39;CpsiMapview.view.snappingExample.EdgeWindowController&#39;,
        &#39;CpsiMapview.view.snappingExample.EdgeWindowViewModel&#39;,
        &#39;CpsiMapview.view.button.DrawingButton&#39;,
        &#39;CpsiMapview.form.RightInfoField&#39;
    ],
    controller: &#39;cmv_edgewindowcontroller&#39;,
    viewModel: {
        type: &#39;cmv_edgewindowviewmodel&#39;
    },
    mixins: {
        editFormMixin: &#39;CpsiMapview.form.ViewMixin&#39;
    },
    title: &#39;Snapping Example&#39;,
    modelValidation: true,
    width: 580,
    height: 360,
    resizable: false,
    maximizable: true,
    frame: false,
    border: false,
    layout: {
        type: &#39;vbox&#39;,
        align: &#39;stretch&#39;
    },

    customButtons: [
        {
            index: 2,
            button: {
                xtype: &#39;cmv_drawing_button&#39;,
                itemId: &#39;drawNetworkEdge&#39;,
                text: &#39;Draw Edge&#39;,
                toggleGroup: &#39;map&#39;,
                iconCls: &#39;icon-line3&#39;,
                glyph: null,
                tooltip: &#39;Create new features to join the network&#39;,
                bind: {
                    drawLayer: &#39;{resultLayer}&#39; // bind the draw layer to the model&#39;s featurestore / layer
                },
                snappingLayerKeys: [&#39;EDGES_WFS&#39;, &#39;NODES_WFS&#39;, &#39;POLYGONS_WFS&#39;],
                tracingLayerKeys: [&#39;EDGES_WFS&#39;, &#39;POLYGONS_WFS&#39;],
                nodeLayerKey: &#39;NODES_WFS&#39;,
                edgeLayerKey: &#39;EDGES_WFS&#39;,
                edgeLayerConfig: {
                    startNodeProperty: &#39;NodeIdFrom&#39;,
                    endNodeProperty: &#39;NodeIdTo&#39;
                },
                polygonLayerKey: &#39;POLYGONS_WFS&#39;
            }
        }
    ],

    items: [{
        xtype: &#39;tabpanel&#39;,
        anchor: &#39;100% 100%&#39;,
        defaults: {
            padding: &#39;5 5 5 5&#39;
        },
        items: [
            {
                tabConfig: {
                    title: &#39;General&#39;
                },
                layout: {
                    type: &#39;anchor&#39;,
                },
                items: [
                    {
                        xtype: &#39;fieldset&#39;,
                        title: &#39;Details&#39;,
                        anchor: &#39;100%&#39;,
                        layout: {
                            type: &#39;table&#39;,
                            columns: 2
                        },
                        items: [{
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;Start Node ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.startNodeId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;End Node ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.endNodeId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;Start Edge ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.startEdgeId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;End Edge ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.endEdgeId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;Start Polygon ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.startPolygonId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;cmv_rightinfofield&#39;,
                            colspan: 1,
                            width: 300,
                            field: {
                                xtype: &#39;displayfield&#39;,
                                labelWidth: 100,
                                width: 200,
                                fieldLabel: &#39;End Polygon ID&#39;,
                                infoIconTooltip: &#39;Database Identifier&#39;,
                                bind: {
                                    value: &#39;{currentRecord.endPolygonId}&#39;
                                }
                            }
                        },
                        {
                            xtype: &#39;displayfield&#39;,
                            colspan: 2,
                            width: 300,
                            value: &#39;Hold down CTRL to modify vertices&#39;
                        }
                        ]
                    }
                ]
            }
        ]
    }
    ]
});
</pre>
</body>
</html>
