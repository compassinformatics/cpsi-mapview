Ext.data.JsonP.CpsiMapview_controller_LayerTreeController({"tagname":"class","name":"CpsiMapview.controller.LayerTreeController","autodetected":{"aliases":true,"alternateClassNames":true,"extends":true,"mixins":true,"requires":true,"uses":true,"members":true,"code_type":true},"files":[{"filename":"LayerTreeController.js","href":"LayerTreeController.html#CpsiMapview-controller-LayerTreeController"}],"aliases":{"controller":["cmv_layertree"]},"alternateClassNames":[],"extends":"Ext.app.ViewController","mixins":[],"requires":["BasiGX.util.Layer","BasiGX.util.Map","CpsiMapview.data.model.LayerTreeNode","CpsiMapview.view.main.Map"],"uses":[],"members":[{"name":"structureMode","tagname":"cfg","owner":"CpsiMapview.controller.LayerTreeController","id":"cfg-structureMode","meta":{}},{"name":"initLayersAdded","tagname":"property","owner":"CpsiMapview.controller.LayerTreeController","id":"property-initLayersAdded","meta":{"private":true}},{"name":"treeConfDefaults","tagname":"property","owner":"CpsiMapview.controller.LayerTreeController","id":"property-treeConfDefaults","meta":{"private":true,"readonly":true}},{"name":"constructor","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-constructor","meta":{}},{"name":"applyTreeConfigsToNode","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-applyTreeConfigsToNode","meta":{}},{"name":"applyTreeConfigsToOlLayer","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-applyTreeConfigsToOlLayer","meta":{}},{"name":"autoConnectToMap","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-autoConnectToMap","meta":{}},{"name":"createOlLayerGroups","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-createOlLayerGroups","meta":{}},{"name":"getGroupedLayers","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-getGroupedLayers","meta":{}},{"name":"loadTreeStructure","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-loadTreeStructure","meta":{}},{"name":"makeLayerStore","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-makeLayerStore","meta":{}},{"name":"onAddWmsToggle","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-onAddWmsToggle","meta":{}},{"name":"onBeforeDestroy","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-onBeforeDestroy","meta":{}},{"name":"updateSwitchLayerNodes","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"method-updateSwitchLayerNodes","meta":{}},{"name":"getTreeNodeConf","tagname":"method","owner":"CpsiMapview.controller.LayerTreeController","id":"static-method-getTreeNodeConf","meta":{"static":true}}],"code_type":"ext_define","id":"class-CpsiMapview.controller.LayerTreeController","component":false,"superclasses":["Ext.app.ViewController"],"subclasses":[],"mixedInto":[],"parentMixins":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>Ext.app.ViewController<div class='subclass '><strong>CpsiMapview.controller.LayerTreeController</strong></div></div><h4>Requires</h4><div class='dependency'>BasiGX.util.Layer</div><div class='dependency'>BasiGX.util.Map</div><div class='dependency'><a href='#!/api/CpsiMapview.data.model.LayerTreeNode' rel='CpsiMapview.data.model.LayerTreeNode' class='docClass'>CpsiMapview.data.model.LayerTreeNode</a></div><div class='dependency'><a href='#!/api/CpsiMapview.view.main.Map' rel='CpsiMapview.view.main.Map' class='docClass'>CpsiMapview.view.main.Map</a></div><h4>Files</h4><div class='dependency'><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController' target='_blank'>LayerTreeController.js</a></div></pre><div class='doc-contents'><p>The controller for the <a href=\"#!/api/CpsiMapview.view.LayerTree\" rel=\"CpsiMapview.view.LayerTree\" class=\"docClass\">CpsiMapview.view.LayerTree</a></p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-cfg'>Config options</h3><div class='subsection'><div id='cfg-structureMode' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-cfg-structureMode' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-cfg-structureMode' class='name expandable'>structureMode</a> : String<span class=\"signature\"></span></div><div class='description'><div class='short'>Mode in order to steer how the layers in tree will be structured. ...</div><div class='long'><p>Mode in order to steer how the layers in tree will be structured.\nAt the moment 'BASELAYER_OVERLAY' will divide the layers in 2 folders\n'Base Layers' and 'Overlays' (depending on their property 'isBaseLayer').\nAll other settings will result in a flat layer list.</p>\n</div></div></div></div></div><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-property'>Properties</h3><div class='subsection'><div id='property-initLayersAdded' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-property-initLayersAdded' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-property-initLayersAdded' class='name expandable'>initLayersAdded</a> : Boolean<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'>Shows if the event 'cmv-init-layersadded' has been fired or not. ...</div><div class='long'><p>Shows if the event 'cmv-init-layersadded' has been fired or not.</p>\n<p>Defaults to: <code>false</code></p></div></div></div><div id='property-treeConfDefaults' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-property-treeConfDefaults' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-property-treeConfDefaults' class='name expandable'>treeConfDefaults</a> : Object<span class=\"signature\"><span class='private' >private</span><span class='readonly' >readonly</span></span></div><div class='description'><div class='short'>Holds the default values for tree nodes of the config file tree.json. ...</div><div class='long'><p>Holds the default values for tree nodes of the config file tree.json.\nWill be set in <a href=\"#!/api/CpsiMapview.controller.LayerTreeController-method-makeLayerStore\" rel=\"CpsiMapview.controller.LayerTreeController-method-makeLayerStore\" class=\"docClass\">makeLayerStore</a> function.</p>\n<p>Defaults to: <code>{}</code></p></div></div></div></div></div><div class='members-section'><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Instance methods</h3><div id='method-constructor' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-constructor' target='_blank' class='view-source'>view source</a></div><strong class='new-keyword'>new</strong><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-constructor' class='name expandable'>CpsiMapview.controller.LayerTreeController</a>( <span class='pre'></span> ) : <a href=\"#!/api/CpsiMapview.controller.LayerTreeController\" rel=\"CpsiMapview.controller.LayerTreeController\" class=\"docClass\">CpsiMapview.controller.LayerTreeController</a><span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'><a href=\"#!/api/CpsiMapview.controller.LayerTreeController\" rel=\"CpsiMapview.controller.LayerTreeController\" class=\"docClass\">CpsiMapview.controller.LayerTreeController</a></span><div class='sub-desc'>\n</div></li></ul></div></div></div><div id='method-applyTreeConfigsToNode' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-applyTreeConfigsToNode' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-applyTreeConfigsToNode' class='name expandable'>applyTreeConfigsToNode</a>( <span class='pre'>node, treeNodeConf</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Applies the values from the tree layer config to the given\ntree node instance. ...</div><div class='long'><p>Applies the values from the tree layer config to the given\ntree node instance.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>node</span> : Ext.data.NodeInterface<div class='sub-desc'><p>The tree node to apply tree conf values to</p>\n</div></li><li><span class='pre'>treeNodeConf</span> : Object<div class='sub-desc'><p>The tree node layer config JSON</p>\n</div></li></ul></div></div></div><div id='method-applyTreeConfigsToOlLayer' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-applyTreeConfigsToOlLayer' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-applyTreeConfigsToOlLayer' class='name expandable'>applyTreeConfigsToOlLayer</a>( <span class='pre'>olLayer, treeNodeConf</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Applies the values from the tree layer config to OL the given\nOL layer. ...</div><div class='long'><p>Applies the values from the tree layer config to OL the given\nOL layer.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>olLayer</span> : ol.layer.Base<div class='sub-desc'><p>The OL layer to apply tree conf values to</p>\n</div></li><li><span class='pre'>treeNodeConf</span> : Object<div class='sub-desc'><p>The tree node layer config JSON</p>\n</div></li></ul></div></div></div><div id='method-autoConnectToMap' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-autoConnectToMap' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-autoConnectToMap' class='name expandable'>autoConnectToMap</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Guesses the mapcomponent and assigns the appropriate layers store, if one\ncould be guessed. ...</div><div class='long'><p>Guesses the mapcomponent and assigns the appropriate layers store, if one\ncould be guessed.</p>\n</div></div></div><div id='method-createOlLayerGroups' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-createOlLayerGroups' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-createOlLayerGroups' class='name expandable'>createOlLayerGroups</a>( <span class='pre'>treeNodesJson, parentGroup</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Creates recursively the OL layer groups for the given tree structure and\nputs them all together in the given parent g...</div><div class='long'><p>Creates recursively the OL layer groups for the given tree structure and\nputs them all together in the given parent group so they get folders in the LayerTree.\nLayers are directly put to the given parent group so they appear as \"leafs\" in the LayerTree.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>treeNodesJson</span> : Object<div class='sub-desc'><p>Child section of the LayerTree structure</p>\n</div></li><li><span class='pre'>parentGroup</span> : ol.layer.Group<div class='sub-desc'><p>The parent group to put children (another groups / layers) into</p>\n</div></li></ul></div></div></div><div id='method-getGroupedLayers' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-getGroupedLayers' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-getGroupedLayers' class='name expandable'>getGroupedLayers</a>( <span class='pre'>treeJson</span> ) : ol.layer.Group<span class=\"signature\"></span></div><div class='description'><div class='short'>Re-groups the layers of the #map, so they are put into a folder hierarchy\nbased on the given tree structure loaded in...</div><div class='long'><p>Re-groups the layers of the #map, so they are put into a folder hierarchy\nbased on the given tree structure loaded in <a href=\"#!/api/CpsiMapview.controller.LayerTreeController-method-loadTreeStructure\" rel=\"CpsiMapview.controller.LayerTreeController-method-loadTreeStructure\" class=\"docClass\">loadTreeStructure</a>.\nFor each folder an OL layer group is created and gets aggregated in a\nroot layer group.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>treeJson</span> : Object<div class='sub-desc'><p>LayerTree structure</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>ol.layer.Group</span><div class='sub-desc'><p>Root layer group</p>\n</div></li></ul></div></div></div><div id='method-loadTreeStructure' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-loadTreeStructure' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-loadTreeStructure' class='name expandable'>loadTreeStructure</a>( <span class='pre'></span> ) : Ext.Promise<span class=\"signature\"></span></div><div class='description'><div class='short'>Loads the JSON tree structure from 'resources/data/layers/tree.json'. ...</div><div class='long'><p>Loads the JSON tree structure from 'resources/data/layers/tree.json'.</p>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Ext.Promise</span><div class='sub-desc'><p>Promise resolving once the JSON is loaded</p>\n</div></li></ul></div></div></div><div id='method-makeLayerStore' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-makeLayerStore' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-makeLayerStore' class='name expandable'>makeLayerStore</a>( <span class='pre'></span> ) : GeoExt.data.store.LayersTree<span class=\"signature\"></span></div><div class='description'><div class='short'>This method will return an instance of the GeoExt class\nGeoExt.data.store.LayersTree based on the connected OL #map. ...</div><div class='long'><p>This method will return an instance of the GeoExt class\n<code>GeoExt.data.store.LayersTree</code> based on the connected OL #map. The layers\nof the <code>ol.Map</code> are restructured and divided into groups based on the\nJSON tree structure loaded in <a href=\"#!/api/CpsiMapview.controller.LayerTreeController-method-loadTreeStructure\" rel=\"CpsiMapview.controller.LayerTreeController-method-loadTreeStructure\" class=\"docClass\">loadTreeStructure</a>. This assures that\nthe layers will appear in different folders in this TreePanel\n(as defined in the tree structure JSON).</p>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>GeoExt.data.store.LayersTree</span><div class='sub-desc'><p>The created store.</p>\n</div></li></ul></div></div></div><div id='method-onAddWmsToggle' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-onAddWmsToggle' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-onAddWmsToggle' class='name expandable'>onAddWmsToggle</a>( <span class='pre'>button, pressed</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>This reacts on toggling the add wms Button in the layertree. ...</div><div class='long'><p>This reacts on toggling the add wms Button in the layertree. It shows a window with an AddWmsForm.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>button</span> : Ext.button.Button<div class='sub-desc'>\n</div></li><li><span class='pre'>pressed</span> : boolean<div class='sub-desc'>\n</div></li></ul></div></div></div><div id='method-onBeforeDestroy' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-onBeforeDestroy' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-onBeforeDestroy' class='name expandable'>onBeforeDestroy</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Destroy any associated windows when this component gets destroyed ...</div><div class='long'><p>Destroy any associated windows when this component gets destroyed</p>\n</div></div></div><div id='method-updateSwitchLayerNodes' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-method-updateSwitchLayerNodes' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-method-updateSwitchLayerNodes' class='name expandable'>updateSwitchLayerNodes</a>( <span class='pre'>groupNode</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Adds configuration to updated switch layer nodes. ...</div><div class='long'><p>Adds configuration to updated switch layer nodes.</p>\n\n<p>Ensures all layer information is transfered to the new\nswitch layer after the switch event</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>groupNode</span> : Ext.data.TreeModel<div class='sub-desc'><p>The folder node that is expanded</p>\n</div></li></ul></div></div></div></div><div class='subsection'><div class='definedBy'>Defined By</div><h4 class='members-subtitle'>Static methods</h3><div id='static-method-getTreeNodeConf' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.controller.LayerTreeController'>CpsiMapview.controller.LayerTreeController</span><br/><a href='source/LayerTreeController.html#CpsiMapview-controller-LayerTreeController-static-method-getTreeNodeConf' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.controller.LayerTreeController-static-method-getTreeNodeConf' class='name expandable'>getTreeNodeConf</a>( <span class='pre'>layerKey, childNodeConf</span> )<span class=\"signature\"><span class='static' >static</span></span></div><div class='description'><div class='short'>Detects the original tree node config from tree.json file for a\nlayer identified by the given layerKey. ...</div><div class='long'><p>Detects the original tree node config from tree.json file for a\nlayer identified by the given layerKey.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>layerKey</span> : String<div class='sub-desc'><p>Identifier of the layer to get node conf for</p>\n</div></li><li><span class='pre'>childNodeConf</span> : Object<div class='sub-desc'><p>Conf to start with (root if not given)</p>\n</div></li></ul></div></div></div></div></div></div></div>","meta":{}});