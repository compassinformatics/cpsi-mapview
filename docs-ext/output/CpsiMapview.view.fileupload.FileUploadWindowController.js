Ext.data.JsonP.CpsiMapview_view_fileupload_FileUploadWindowController({"tagname":"class","name":"CpsiMapview.view.fileupload.FileUploadWindowController","autodetected":{"aliases":true,"alternateClassNames":true,"extends":true,"mixins":true,"requires":true,"uses":true,"members":true,"code_type":true},"files":[{"filename":"FileUploadWindowController.js","href":"FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController"}],"aliases":{"controller":["cmv_fileuploadwindowcontroller"]},"alternateClassNames":[],"extends":"Ext.app.ViewController","mixins":[],"requires":["CpsiMapview.model.fileupload.Attachment"],"uses":[],"members":[{"name":"getAttachmentUploadUrl","tagname":"method","owner":"CpsiMapview.view.fileupload.FileUploadWindowController","id":"method-getAttachmentUploadUrl","meta":{"private":true}},{"name":"onAttachmentCancelUpload","tagname":"method","owner":"CpsiMapview.view.fileupload.FileUploadWindowController","id":"method-onAttachmentCancelUpload","meta":{}},{"name":"onAttachmentSave","tagname":"method","owner":"CpsiMapview.view.fileupload.FileUploadWindowController","id":"method-onAttachmentSave","meta":{}},{"name":"onFailure","tagname":"method","owner":"CpsiMapview.view.fileupload.FileUploadWindowController","id":"method-onFailure","meta":{}},{"name":"onSuccess","tagname":"method","owner":"CpsiMapview.view.fileupload.FileUploadWindowController","id":"method-onSuccess","meta":{}}],"code_type":"ext_define","id":"class-CpsiMapview.view.fileupload.FileUploadWindowController","short_doc":"Controller for the window used to add new attachments\n\nFile uploads are not performed using normal 'Ajax' techniques,...","component":false,"superclasses":["Ext.app.ViewController"],"subclasses":[],"mixedInto":[],"parentMixins":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>Ext.app.ViewController<div class='subclass '><strong>CpsiMapview.view.fileupload.FileUploadWindowController</strong></div></div><h4>Requires</h4><div class='dependency'><a href='#!/api/CpsiMapview.model.fileupload.Attachment' rel='CpsiMapview.model.fileupload.Attachment' class='docClass'>CpsiMapview.model.fileupload.Attachment</a></div><h4>Files</h4><div class='dependency'><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController' target='_blank'>FileUploadWindowController.js</a></div></pre><div class='doc-contents'><p>Controller for the window used to add new attachments</p>\n\n<p>File uploads are not performed using normal 'Ajax' techniques, that is they are\nnot performed using XMLHttpRequests.\nInstead the form is submitted in the standard manner with the DOM <form> element temporarily modified to have\nits target set to refer to a dynamically generated, hidden <iframe> which is inserted into the document but\nremoved after the return data has been gathered.\nThe server response is parsed by the browser to create the document for the IFRAME.\nIf the server is using JSON to send the return object, then the Content-Type header must\nbe set to 'text/html' in order to tell the browser to insert the text unchanged into the document body.</iframe></form></p>\n\n<p>Characters which are significant to an HTML parser must be sent as HTML entities,\nso encode '&lt;' as '&lt;', '&amp;' as '&amp;' etc.</p>\n\n<p>The response text is retrieved from the document, and a fake XMLHttpRequest object is created containing a\nresponseText property in order to conform to the requirements of event handlers and callbacks.\nBe aware that file upload packets are sent with the content type multipart/form and some server\ntechnologies (notably JEE) may require some custom processing in order to retrieve parameter names\nand parameter values from the packet content.</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-getAttachmentUploadUrl' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.view.fileupload.FileUploadWindowController'>CpsiMapview.view.fileupload.FileUploadWindowController</span><br/><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController-method-getAttachmentUploadUrl' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.view.fileupload.FileUploadWindowController-method-getAttachmentUploadUrl' class='name expandable'>getAttachmentUploadUrl</a>( <span class='pre'></span> )<span class=\"signature\"><span class='private' >private</span></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-onAttachmentCancelUpload' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.view.fileupload.FileUploadWindowController'>CpsiMapview.view.fileupload.FileUploadWindowController</span><br/><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController-method-onAttachmentCancelUpload' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.view.fileupload.FileUploadWindowController-method-onAttachmentCancelUpload' class='name expandable'>onAttachmentCancelUpload</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Close the form on cancel ...</div><div class='long'><p>Close the form on cancel</p>\n</div></div></div><div id='method-onAttachmentSave' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.view.fileupload.FileUploadWindowController'>CpsiMapview.view.fileupload.FileUploadWindowController</span><br/><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController-method-onAttachmentSave' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.view.fileupload.FileUploadWindowController-method-onAttachmentSave' class='name expandable'>onAttachmentSave</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Save the attachment to the server ...</div><div class='long'><p>Save the attachment to the server</p>\n</div></div></div><div id='method-onFailure' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.view.fileupload.FileUploadWindowController'>CpsiMapview.view.fileupload.FileUploadWindowController</span><br/><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController-method-onFailure' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.view.fileupload.FileUploadWindowController-method-onFailure' class='name expandable'>onFailure</a>( <span class='pre'>form, action</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Alert the user the file was not successfully uploaded\nJSON error messages are wrapped up in HTML\nresponseText: '{'suc...</div><div class='long'><p>Alert the user the file was not successfully uploaded\nJSON error messages are wrapped up in HTML\nresponseText: '<pre style='word-wrap: break-word; white-space: pre-wrap;'>{'success':false,'message':'The cookie header with user token has not been provided.'}</pre>'\nso get just the error message\nrelevant link http://stackoverflow.com/questions/18150134/response-of-a-submit-form-is-adding-pre-to-json</p>\n\n<p>The server response is parsed by the browser to create the document for the IFRAME.\nIf the server is using JSON to send the return object, then the Content-Type header\nmust be set to 'text/html' (on the server-side) in order to tell the browser to insert the text\nunchanged into the document body.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>form</span> : any<div class='sub-desc'>\n</div></li><li><span class='pre'>action</span> : any<div class='sub-desc'>\n</div></li></ul></div></div></div><div id='method-onSuccess' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='CpsiMapview.view.fileupload.FileUploadWindowController'>CpsiMapview.view.fileupload.FileUploadWindowController</span><br/><a href='source/FileUploadWindowController.html#CpsiMapview-view-fileupload-FileUploadWindowController-method-onSuccess' target='_blank' class='view-source'>view source</a></div><a href='#!/api/CpsiMapview.view.fileupload.FileUploadWindowController-method-onSuccess' class='name expandable'>onSuccess</a>( <span class='pre'>form, action</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Inform the user that the attachment was successfully uploaded and\ntrigger an event to the new record can be added to ...</div><div class='long'><p>Inform the user that the attachment was successfully uploaded and\ntrigger an event to the new record can be added to the attachments grid\nTODO - return full object in response when saving</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>form</span> : any<div class='sub-desc'>\n</div></li><li><span class='pre'>action</span> : any<div class='sub-desc'>\n</div></li></ul></div></div></div></div></div></div></div>","meta":{}});